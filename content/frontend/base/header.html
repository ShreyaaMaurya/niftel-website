<style>
@media (max-width: 1199px) { /* Changed to 1199px for consistency with your media query */
  /* Hide all nested <ul> lists by default */
  .navmenu ul ul {
    display: none !important;
  }
  
  /* Show only the direct child <ul> when its parent <li> has the dropdown-active class */
  .navmenu .dropdown.dropdown-active > ul {
    display: block !important;
  }
  
  /* Keep your logo and general layout CSS here */
  /* If you are using the sliding panel CSS (from our last successful fix), keep that here too. */
}
</style>  
<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="container position-relative d-flex align-items-center justify-content-between">

    <a href="/index.html" class="logo d-flex align-items-center me-auto me-xl-0">
      <img src="/assets/img/logo1.png" alt="">
    </a>

    <nav id="navmenu" class="navmenu mx-auto">
      <ul>
        <li><a href="/index.html" class="active">Home</a></li>

        <li class="dropdown">
          <a href="/services page/services.html"><span>Services</span> <i class="bi bi-chevron-down toggle-dropdown" role="button"></i></a>
          <ul>
            <li class="dropdown">
              <a href="/services page/services.html#bpo-services"><span>BPO Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/BPO services/backoffice.html">Back Office</a></li>
                <li><a href="/services page/BPO services/frontoffice.html">Front Office</a></li>
                <li><a href="/services page/BPO services/invoicemanagement.html">Invoice Management</a></li>
                <li><a href="/services page/BPO services/finance&accounting.html">Finance & Accounting</a></li>
                <li><a href="/services page/BPO services/ecommerce.html">E-commerce Support</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="/services page/services.html#data-services"><span>Data Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/Data services/leadConversion.html">Lead Conversion</a></li>
                <li><a href="/services page/Data services/dataValidation.html">Data Validation</a></li>
                <li><a href="/services page/Data services/dataMigration.html">Data Migration</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="/services page/services.html#call-services"><span>Call Center Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/Tech Support/inbound-call.html">Inbound Call Support</a></li>
                <li><a href="/services page/Tech Support/outbound.html">Outbound Call Support</a></li>
                <li><a href="/services page/Tech Support/answering-services.html">Answering Services</a></li>
                <li><a href="/services page/Tech Support/tech-support.html">Tech Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li><a href="/teams.html">Our Team</a></li>
        <li><a href="https://www.niftelresources.com/">Resources</a></li>
        <li><a href="https://www.niftelresources.com/apply-for-job">Careers</a></li>
        <li><a href="/content/frontend/contactUs.html">Contact Us</a></li>

      </ul>
    </nav>
    <button class="mobile-nav-toggle d-xl-none" type="button"><i class="bi bi-list"></i></button>

  </div>
</header>
<script>
function loadComponent(id, url) {
  return fetch(url)
    .then(response => response.text())
    .then(html => {
      document.getElementById(id).innerHTML = html;
    })
    .catch(err => console.error(err));
}
   
function initMobileNav() {
  const body = document.body;
  const toggle = document.querySelector('.mobile-nav-toggle');
  const nav = document.querySelector('#navmenu');

  if (!toggle || !nav) return;

  /* HAMBURGER */
  toggle.addEventListener('click', function () {
    body.classList.toggle('mobile-nav-active');
    const icon = this.querySelector('i');
    icon.classList.toggle('bi-list');
    icon.classList.toggle('bi-x');
  });
/* ðŸ”¥ ALL DROPDOWNS (ANY LEVEL) - DEFINITIVE FIX (Using new HTML structure) */
nav.querySelectorAll('.js-mobile-toggle').forEach(toggleElement => {
  
    toggleElement.addEventListener('click', function (e) {
        if (window.innerWidth <= 991) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            const clickedDropdown = this.closest('.dropdown');
            const parentUl = clickedDropdown.closest('ul');
            
            // 1. Close all active sibling dropdowns
            parentUl.querySelectorAll('.dropdown-active').forEach(activeSibling => {
                if (activeSibling !== clickedDropdown) {
                    activeSibling.classList.remove('dropdown-active');
                    // Reset arrow icon animation
                    const siblingArrow = activeSibling.querySelector('.js-mobile-toggle i');
                    if (siblingArrow) siblingArrow.style.transform = 'rotate(0deg)';
                }
            });
            
            // 2. Toggle the current dropdown
            clickedDropdown.classList.toggle('dropdown-active');
            
            // 3. Apply/Remove arrow rotation
            const arrowIcon = this.querySelector('i');
            if (clickedDropdown.classList.contains('dropdown-active')) {
                arrowIcon.style.transform = 'rotate(180deg)';
            } else {
                arrowIcon.style.transform = 'rotate(0deg)';
            }
        }
    });
});
}

</script>