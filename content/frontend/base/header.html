<style>
@media (max-width: 1199px) { /* Changed to 1199px for consistency with your media query */
  /* Hide all nested <ul> lists by default */
  .navmenu ul ul {
    display: none !important;
  }
  
  /* Show only the direct child <ul> when its parent <li> has the dropdown-active class */
  .navmenu .dropdown.dropdown-active > ul {
    display: block !important;
  }
  
  /* Keep your logo and general layout CSS here */
  /* If you are using the sliding panel CSS (from our last successful fix), keep that here too. */
}
</style>  
<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="container position-relative d-flex align-items-center justify-content-between">

    <a href="/index.html" class="logo d-flex align-items-center me-auto me-xl-0">
      <img src="/assets/img/logo1.png" alt="">
    </a>

    <nav id="navmenu" class="navmenu mx-auto">
      <ul>
        <li><a href="/index.html" class="active">Home</a></li>

        <li class="dropdown">
          <a href="/services page/services.html"><span>Services</span> <i class="bi bi-chevron-down toggle-dropdown" role="button"></i></a>
          <ul>
            <li class="dropdown">
              <a href="/services page/services.html#bpo-services"><span>BPO Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/BPO services/backoffice.html">Back Office</a></li>
                <li><a href="/services page/BPO services/frontoffice.html">Front Office</a></li>
                <li><a href="/services page/BPO services/invoicemanagement.html">Invoice Management</a></li>
                <li><a href="/services page/BPO services/finance&accounting.html">Finance & Accounting</a></li>
                <li><a href="/services page/BPO services/ecommerce.html">E-commerce Support</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="/services page/services.html#data-services"><span>Data Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/Data services/leadConversion.html">Lead Conversion</a></li>
                <li><a href="/services page/Data services/dataValidation.html">Data Validation</a></li>
                <li><a href="/services page/Data services/dataMigration.html">Data Migration</a></li>
              </ul>
            </li>

            <li class="dropdown">
              <a href="/services page/services.html#call-services"><span>Call Center Services</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="/services page/Tech Support/inbound-call.html">Inbound Call Support</a></li>
                <li><a href="/services page/Tech Support/outbound.html">Outbound Call Support</a></li>
                <li><a href="/services page/Tech Support/answering-services.html">Answering Services</a></li>
                <li><a href="/services page/Tech Support/tech-support.html">Tech Support</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <li><a href="/teams.html">Our Team</a></li>
        <li><a href="https://www.niftelresources.com/">Resources</a></li>
        <li><a href="https://www.niftelresources.com/apply-for-job">Careers</a></li>
        <li><a href="/content/frontend/contactUs.html">Contact Us</a></li>

      </ul>
    </nav>
    <button class="mobile-nav-toggle d-xl-none" type="button"><i class="bi bi-list"></i></button>

  </div>
</header>
<script>
function loadComponent(id, url) {
  return fetch(url)
    .then(res => res.text())
    .then(html => {
      document.getElementById(id).innerHTML = html;
    })
    .catch(err => console.error(err));
}

/* âœ… MOBILE NAV INITIALIZER */
function initMobileNav() {
  const body = document.body;
  const toggle = document.querySelector('.mobile-nav-toggle');
  const nav = document.querySelector('#navmenu');

  if (!toggle || !nav) return;

  /* =====================
     HAMBURGER TOGGLE
  ====================== */
  toggle.addEventListener('click', () => {
    body.classList.toggle('mobile-nav-active');

    const icon = toggle.querySelector('i');
    icon.classList.toggle('bi-list');
    icon.classList.toggle('bi-x');
  });

  /* =====================
     DROPDOWNS (ALL LEVELS)
  ====================== */
  nav.querySelectorAll('.js-mobile-toggle').forEach(link => {

    link.addEventListener('click', function (e) {
      if (window.innerWidth > 991) return;

      e.preventDefault();
      e.stopPropagation();

      const dropdown = this.closest('.dropdown');
      const parentUl = dropdown.parentElement;

      /* Close sibling dropdowns */
      parentUl.querySelectorAll(':scope > .dropdown.dropdown-active')
        .forEach(item => {
          if (item !== dropdown) {
            item.classList.remove('dropdown-active');
          }
        });

      /* Toggle current dropdown */
      dropdown.classList.toggle('dropdown-active');
    });

  });
}

/* =====================
   WAIT FOR HEADER LOAD
====================== */
document.addEventListener('DOMContentLoaded', () => {

  const observer = new MutationObserver(() => {
    if (document.querySelector('.mobile-nav-toggle')) {
      initMobileNav();
      observer.disconnect();
    }
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true
  });

});

document.addEventListener("click", function (e) {

  /* =====================
     MOBILE MENU TOGGLE
  ====================== */
  const toggle = e.target.closest(".mobile-nav-toggle");
  if (toggle) {
    document.body.classList.toggle("mobile-nav-active");

    const icon = toggle.querySelector("i");
    if (icon) {
      icon.classList.toggle("bi-list");
      icon.classList.toggle("bi-x");
    }
    return;
  }

  /* =====================
     MOBILE DROPDOWNS
  ====================== */
  const dropdownToggle = e.target.closest(".js-mobile-toggle");
  if (dropdownToggle && window.innerWidth <= 991) {

    e.preventDefault();

    const dropdown = dropdownToggle.closest(".dropdown");
    if (!dropdown) return;

    dropdown.classList.toggle("dropdown-active");
  }

});

</script>
